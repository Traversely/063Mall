(function(){var e=5,t=!1,n=function(e){var t=/^[^\?]+\?([\w\W]+)$/,n=/([^&=]+)=([\w\W]*?)(&|$|#)/g,r=t.exec(e),i={};if(r&&r[1]){var s=r[1],o;while((o=n.exec(s))!=null)i[o[1]]=o[2]}return i},r=function(e,t){var n=$.extend({},t);n.q=n.q===undefined?"*":n.q;var r=n.q;if(e=="api")var i=utils.path.encodeQueryJson(n),s=[SEARCH_HOST,SEARCH_API,"?",i].join("");else var i=utils.path.encodeQueryJson(n),s=["/search/","?",i].join("");return s},i={installHover:function(){var e=$(".js-clone-item"),t;$(".list-container").delegate(".list-item","mouseenter",function(){var t=this,n=$(t).offset();e.stop(!0).css({height:"356px",top:n.top+"px",left:n.left+"px"}).html($(t).html()).show().animate({top:n.top-5+"px"},"fast")}),e.on("mouseleave",function(){e.stop(!0).hide().html("")}),e.on("hover",function(){},function(){e.stop(!0).hide().html("")})},installBtns:function(){$("body").delegate(".add-cart","click",function(){var e=this;QHPass.when.signIn(function(){qikoo.cart.addCart($(e).attr("data-id"),function(){window.location.href="/shop/shopcart"})})})},installStock:function(){$(".filter-box").delegate("#is-stock","click",function(){location.href=$(this).attr("data-lnk")})},installHotList:function(){var t=function(){var e=parseInt($(".itemlist .item").width(),10),t=parseInt($(".itemlist .item").css("margin-right"),10);return e+t},n=!1,r=function(){var n=parseInt($(".itemlist ul").css("left"),10);n==0?($(".left").addClass("disabled"),$(".left").removeClass("abled")):($(".left").addClass("abled"),$(".left").removeClass("disabled"));var r=t(),i=$(".itemlist .item").length-e;i*r*-1==n?($(".right").removeClass("abled"),$(".right").addClass("disabled")):($(".right").addClass("abled"),$(".right").removeClass("disabled"))};$("body").delegate(".right","click",function(){if(n)return;if($(this).hasClass("disabled"))return;var i=parseInt($(".itemlist ul").css("left"),10);width=t()*e,n=!0,$(".itemlist ul").animate({left:i-width+"px"},function(){n=!1,r()})}),$("body").delegate(".left","click",function(){if(n)return;if($(this).hasClass("disabled"))return;var i=parseInt($(".itemlist ul").css("left"),10);if(i==0)return;width=t()*e,n=!0,$(".itemlist ul").animate({left:i+width+"px"},function(){n=!1,r()})})},initialTags:function(){function e(){t==0&&$("body").delegate(".find_more","click",function(){var e=$(this).parents(".option_box");e.hasClass("unspread")?(e.scrollTop(0),e.removeClass("unspread")):(e.scrollTop(0),e.addClass("unspread")),$(this).find(".spread_icon img").toggle(),t=!0})}function i(){$(".sww").click(function(){var e=n(window.location.href),t={};delete e.brand;for(var i in e)t[i]=decodeURI(e[i]);var s=r("url",t);window.location.href=s})}e(),i()},dealWithFindMoreVisible:function(){var e=$(".option_box");e.each(function(){$(this).find("a").length>9&&$(this).find(".find_more").show(),$(this).scroll(function(){var e=$(this).scrollTop();$(this).find(".find_more").css("top",e)})})},run:function(){$("img.lazy").lazyload({threshold:200}),this.installStock(),this.installHover(),this.installBtns(),this.installHotList(),this.initialTags()}};window.filters=i})(),ShopSearchEngine.getSearchList(),filters.run();